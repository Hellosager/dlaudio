<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="ISO-8859-1">
<title>Converting...</title>
</head>
<body>
	<progress id="progress-bar" value="0" max="100" />

	<script th:inline="javascript">
	
		updateProgress();
	
		function updateProgress(){

			var xhttp = new XMLHttpRequest();	// create xhttpRequest
			xhttp.open("GET", "/retrieveProgress", false);	// specify GET-Method, path and set it to synchron Request
			xhttp.send();	// send request
			
			var progressResponse = JSON.parse(xhttp.responseText);	// parse JSON response into JS object
			document.getElementById("progress-bar").setAttribute("value", progressResponse.progress);	// use the parsed object to get the progress, the JSON delivered
			setTimeout("updateProgress()", 1000); // one request per second
		}
   	</script>
	
</body>
</html>